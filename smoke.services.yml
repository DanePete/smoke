services:
  smoke.module_detector:
    class: Drupal\smoke\Service\ModuleDetector
    arguments:
      - '@module_handler'
      - '@entity_type.manager'
      - '@config.factory'

  smoke.suite_discovery:
    class: Drupal\smoke\Service\SuiteDiscovery
    arguments:
      - '@smoke.module_detector'
      - '@smoke.yaml_suite_discovery'
      - '@extension.list.module'

  smoke.config_generator:
    class: Drupal\smoke\Service\ConfigGenerator
    arguments:
      - '@smoke.suite_discovery'
      - '@state'
      - '@config.factory'
      - '@request_stack'
      - '@extension.list.module'

  smoke.test_runner:
    class: Drupal\smoke\Service\TestRunner
    arguments:
      - '@smoke.config_generator'
      - '@smoke.suite_discovery'
      - '@state'
      - '@module_handler'
      - '@file_system'

  smoke.junit_reporter:
    class: Drupal\smoke\Service\JunitReporter

  smoke.error_helper:
    class: Drupal\smoke\Service\ErrorHelper

  smoke.suite_plugin_manager:
    class: Drupal\smoke\Plugin\SuitePluginManager
    parent: default_plugin_manager

  smoke.yaml_suite_discovery:
    class: Drupal\smoke\Discovery\YamlSuiteDiscovery
    arguments:
      - '@module_handler'
